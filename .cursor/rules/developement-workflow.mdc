---
description: 
globs: 
alwaysApply: true
---

# Steampipe AWS Plugin Development Workflow

This document outlines the step-by-step process for developing new tables in the Steampipe AWS plugin.

## Development Workflow

### 2. Fix Lint Errors
```bash
# Run golangci-lint to check for linting issues
golangci-lint run
```

### 3. Build the New Table
```bash
# Run make to build the plugin
make
```

### 4. Fix Build Errors
- Address any errors reported by the make command
- Common issues include:
  - Missing imports
  - Type mismatches
  - Undefined functions
  - Incorrect API calls

### 5. Verify Build
```bash
# Run make again to ensure all errors are resolved
make
```

### 6. Restart Steampipe Service
```bash
# Restart the Steampipe service to load the new table
steampipe service restart
```

### 7. Test the Table
```bash
# Connect to Steampipe MCP
steampipe query

# Run test queries against the new table
select * from aws_new_table;
```

## Common Commands Reference

### Linting
```bash
# Run linter
golangci-lint run

# Run linter with verbose output
golangci-lint run -v
```

### Building
```bash
# Build the plugin
make

# Clean and rebuild
make clean && make
```

### Steampipe Commands
```bash
# Restart service
steampipe service restart

# Check service status
steampipe service status

# Connect to MCP
steampipe query

# List available tables
select * from steampipe_table_list;
```

## Troubleshooting

### Common Issues and Solutions

1. **Lint Errors**
   - Missing imports: Add required imports
   - Unused variables: Remove or use the variables
   - Formatting issues: Run `go fmt`

2. **Build Errors**
   - Missing dependencies: Run `go mod tidy`
   - Type errors: Check type definitions and casts
   - API errors: Verify AWS SDK usage

3. **Service Issues**
   - Service not starting: Check logs with `steampipe service logs`
   - Table not found: Verify table name and restart service
   - Connection issues: Check service status and configuration

4. **Query Issues**
   - Table not found: Verify table name and service status
   - Permission errors: Check AWS credentials
   - Timeout errors: Check network connectivity

## Best Practices

1. **Before Committing**
   - Run linter
   - Build successfully
   - Test queries
   - Update documentation

2. **Testing**
   - Test all columns
   - Test error conditions
   - Test pagination
   - Test rate limiting

3. **Documentation**
   - Keep documentation up to date
   - Include examples
   - Document limitations
   - Add troubleshooting tips